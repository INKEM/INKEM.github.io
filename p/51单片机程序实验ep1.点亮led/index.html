<!DOCTYPE html>
<html lang="zh-cn" dir="ltr">
    <head><meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1'><meta name='description' content="点亮第一个LED；控制LED闪烁；LED流水灯">
<title>【51单片机】程序实验Ep1.点亮LED</title>

<link rel='canonical' href='https://INKEM.github.io/p/51%E5%8D%95%E7%89%87%E6%9C%BA%E7%A8%8B%E5%BA%8F%E5%AE%9E%E9%AA%8Cep1.%E7%82%B9%E4%BA%AEled/'>

<link rel="stylesheet" href="/scss/style.min.663803bebe609202d5b39d848f2d7c2dc8b598a2d879efa079fa88893d29c49c.css"><meta property='og:title' content="【51单片机】程序实验Ep1.点亮LED">
<meta property='og:description' content="点亮第一个LED；控制LED闪烁；LED流水灯">
<meta property='og:url' content='https://INKEM.github.io/p/51%E5%8D%95%E7%89%87%E6%9C%BA%E7%A8%8B%E5%BA%8F%E5%AE%9E%E9%AA%8Cep1.%E7%82%B9%E4%BA%AEled/'>
<meta property='og:site_name' content='一杯为品'>
<meta property='og:type' content='article'><meta property='article:section' content='Post' /><meta property='article:published_time' content='2024-11-09T00:00:00&#43;00:00'/><meta property='article:modified_time' content='2024-11-09T00:00:00&#43;00:00'/>
<meta name="twitter:title" content="【51单片机】程序实验Ep1.点亮LED">
<meta name="twitter:description" content="点亮第一个LED；控制LED闪烁；LED流水灯">
    <link rel="shortcut icon" href="/favicon.ico" />

    </head>
    <body class="
    article-page
    ">
    <script>
        (function() {
            const colorSchemeKey = 'StackColorScheme';
            if(!localStorage.getItem(colorSchemeKey)){
                localStorage.setItem(colorSchemeKey, "dark");
            }
        })();
    </script><script>
    (function() {
        const colorSchemeKey = 'StackColorScheme';
        const colorSchemeItem = localStorage.getItem(colorSchemeKey);
        const supportDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches === true;

        if (colorSchemeItem == 'dark' || colorSchemeItem === 'auto' && supportDarkMode) {
            

            document.documentElement.dataset.scheme = 'dark';
        } else {
            document.documentElement.dataset.scheme = 'light';
        }
    })();
</script>
<div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky ">
    <button class="hamburger hamburger--spin" type="button" id="toggle-menu" aria-label="切换菜单">
        <span class="hamburger-box">
            <span class="hamburger-inner"></span>
        </span>
    </button>

    <header>
        
            
            <figure class="site-avatar">
                <a href="/">
                
                    
                    
                    
                        
                        <img src="/img/avatar_hu16835031703737007367.png" width="300"
                            height="300" class="site-logo" loading="lazy" alt="Avatar">
                    
                
                </a>
                
                    <span class="emoji">🐦</span>
                
            </figure>
            
        
        
        <div class="site-meta">
            <h1 class="site-name"><a href="/">一杯为品</a></h1>
            <h2 class="site-description">哈工大2023届智能机器人班在读，在努力成为机器人、人工智能、硬件工程多面手的路上</h2>
        </div>
    </header><ol class="menu-social">
            
                <li>
                    <a 
                        href='https://blog.csdn.net/mojin2005?spm=1010.2135.3001.5343'
                        target="_blank"
                        title="CSDN"
                        rel="me"
                    >
                        
                        
                            <svg width="48" height="48" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">
<path fill-rule="evenodd" clip-rule="evenodd" d="M48 0H0V48H48V0ZM25.9509 14.1922C27.8907 14.578 29.6725 15.5304 31.0711 16.9289C31.8521 17.71 33.1184 17.71 33.8995 16.9289C34.6805 16.1479 34.6805 14.8816 33.8995 14.1005C31.9416 12.1426 29.447 10.8092 26.7313 10.269C24.0155 9.72882 21.2006 10.0061 18.6424 11.0657C16.0843 12.1253 13.8978 13.9197 12.3594 16.222C10.8211 18.5243 10 21.2311 10 24C10 26.7689 10.8211 29.4757 12.3594 31.778C13.8978 34.0803 16.0843 35.8747 18.6424 36.9343C21.2006 37.9939 24.0155 38.2712 26.7313 37.731C29.447 37.1908 31.9416 35.8574 33.8995 33.8995C34.6805 33.1185 34.6805 31.8521 33.8995 31.0711C33.1184 30.29 31.8521 30.29 31.0711 31.0711C29.6725 32.4696 27.8907 33.422 25.9509 33.8079C24.0111 34.1937 22.0004 33.9957 20.1732 33.2388C18.3459 32.4819 16.7841 31.2002 15.6853 29.5557C14.5865 27.9112 14 25.9778 14 24C14 22.0222 14.5865 20.0888 15.6853 18.4443C16.7841 16.7998 18.3459 15.5181 20.1732 14.7612C22.0004 14.0043 24.0111 13.8063 25.9509 14.1922Z" fill="#333333"/>
</svg>

                        
                    </a>
                </li>
            
                <li>
                    <a 
                        href='https://github.com/INKEM'
                        target="_blank"
                        title="GitHub"
                        rel="me"
                    >
                        
                        
                            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-brand-github" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
  <path d="M9 19c-4.3 1.4 -4.3 -2.5 -6 -3m12 5v-3.5c0 -1 .1 -1.4 -.5 -2c2.8 -.3 5.5 -1.4 5.5 -6a4.6 4.6 0 0 0 -1.3 -3.2a4.2 4.2 0 0 0 -.1 -3.2s-1.1 -.3 -3.5 1.3a12.3 12.3 0 0 0 -6.2 0c-2.4 -1.6 -3.5 -1.3 -3.5 -1.3a4.2 4.2 0 0 0 -.1 3.2a4.6 4.6 0 0 0 -1.3 3.2c0 4.6 2.7 5.7 5.5 6c-.6 .6 -.6 1.2 -.5 2v3.5" />
</svg>



                        
                    </a>
                </li>
            
        </ol><ol class="menu" id="main-menu">
        
        
        
        <li >
            <a href='/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-home" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <polyline points="5 12 3 12 12 3 21 12 19 12" />
  <path d="M5 12v7a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-7" />
  <path d="M9 21v-6a2 2 0 0 1 2 -2h2a2 2 0 0 1 2 2v6" />
</svg>



                
                <span>主页</span>
            </a>
        </li>
        
        
        <li >
            <a href='/%E5%85%B3%E4%BA%8E/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-user" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="7" r="4" />
  <path d="M6 21v-2a4 4 0 0 1 4 -4h4a4 4 0 0 1 4 4v2" />
</svg>



                
                <span>关于</span>
            </a>
        </li>
        
        
        <li >
            <a href='/archives/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-archive" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <rect x="3" y="4" width="18" height="4" rx="2" />
  <path d="M5 8v10a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-10" />
  <line x1="10" y1="12" x2="14" y2="12" />
</svg>



                
                <span>归档</span>
            </a>
        </li>
        
        
        <li >
            <a href='/search/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="10" cy="10" r="7" />
  <line x1="21" y1="21" x2="15" y2="15" />
</svg>



                
                <span>搜索</span>
            </a>
        </li>
        
        
        <li >
            <a href='/%E5%8F%8B%E6%83%85%E9%93%BE%E6%8E%A5/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-link" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <path d="M10 14a3.5 3.5 0 0 0 5 0l4 -4a3.5 3.5 0 0 0 -5 -5l-.5 .5" />
  <path d="M14 10a3.5 3.5 0 0 0 -5 0l-4 4a3.5 3.5 0 0 0 5 5l.5 -.5" />
</svg>



                
                <span>友情链接</span>
            </a>
        </li>
        
        <li class="menu-bottom-section">
            <ol class="menu">

                
                    <li id="dark-mode-toggle">
                        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="8" cy="12" r="2" />
  <rect x="2" y="6" width="20" height="12" rx="6" />
</svg>



                        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="16" cy="12" r="2" />
  <rect x="2" y="6" width="20" height="12" rx="6" />
</svg>



                        <span>暗色模式</span>
                    </li>
                
            </ol>
        </li>
    </ol>
</aside>

    <aside class="sidebar right-sidebar sticky">
        
            
                
    <section class="widget archives">
        <div class="widget-icon">
            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <line x1="5" y1="9" x2="19" y2="9" />
  <line x1="5" y1="15" x2="19" y2="15" />
  <line x1="11" y1="4" x2="7" y2="20" />
  <line x1="17" y1="4" x2="13" y2="20" />
</svg>



        </div>
        <h2 class="widget-title section-title">目录</h2>
        
        <div class="widget--toc">
            <nav id="TableOfContents">
  <ol>
    <li><a href="#单片机介绍">单片机介绍</a>
      <ol>
        <li><a href="#51单片机最小系统">51单片机最小系统</a>
          <ol>
            <li><a href="#晶振电路">晶振电路</a></li>
            <li><a href="#复位电路">复位电路</a></li>
            <li><a href="#电源电路">电源电路</a></li>
            <li><a href="#下载电路">下载电路</a></li>
          </ol>
        </li>
      </ol>
    </li>
    <li><a href="#c语言c51扩充内容">C语言C51扩充内容</a>
      <ol>
        <li><a href="#c51扩充数据类型">C51扩充数据类型</a></li>
        <li><a href="#reg52头文件">reg52头文件</a></li>
      </ol>
    </li>
    <li><a href="#点亮第一个led">点亮第一个LED</a>
      <ol>
        <li><a href="#c51单片机gpio介绍及led线路">C51单片机GPIO介绍及LED线路</a></li>
        <li><a href="#程序1点亮d1指示灯">程序1：点亮D1指示灯</a></li>
        <li><a href="#程序2控制d1指示灯闪烁">程序2：控制D1指示灯闪烁</a></li>
        <li><a href="#程序3led流水灯">程序3：LED流水灯</a></li>
      </ol>
    </li>
  </ol>
</nav>
        </div>
    </section>

            
        
    </aside>


            <main class="main full-width">
    <article class="main-article">
    <header class="article-header">

    <div class="article-details">
    
    <header class="article-category">
        
            <a href="/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" style="background-color: #2a9d8f; color: #fff;">
                学习笔记
            </a>
        
            <a href="/categories/51%E5%8D%95%E7%89%87%E6%9C%BA/" style="background-color: #FF0000; color: #fff;">
                51单片机
            </a>
        
    </header>
    

    <div class="article-title-wrapper">
        <h2 class="article-title">
            <a href="/p/51%E5%8D%95%E7%89%87%E6%9C%BA%E7%A8%8B%E5%BA%8F%E5%AE%9E%E9%AA%8Cep1.%E7%82%B9%E4%BA%AEled/">【51单片机】程序实验Ep1.点亮LED</a>
        </h2>
    
        
        <h3 class="article-subtitle">
            点亮第一个LED；控制LED闪烁；LED流水灯
        </h3>
        
    </div>

    
    
    
    
    <footer class="article-time">
        
            <div>
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <path d="M11.795 21h-6.795a2 2 0 0 1 -2 -2v-12a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v4" />
  <circle cx="18" cy="18" r="4" />
  <path d="M15 3v4" />
  <path d="M7 3v4" />
  <path d="M3 11h16" />
  <path d="M18 16.496v1.504l1 1" />
</svg>
                <time class="article-time--published">Nov 09, 2024</time>
            </div>
        

        
            <div>
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="12" r="9" />
  <polyline points="12 7 12 12 15 15" />
</svg>



                <time class="article-time--reading">
                    阅读时长: 6 分钟
                </time>
            </div>
        
    </footer>
    

    
</div>

</header>

    <section class="article-content">
    
    
    <blockquote>
<p>由于博主还未学习数字电路和计算机组成原理，因此本系列先开展单片机软件编程的内容，硬件结构的内容简单带过，会考虑安排在后续学习计划中，编程入门部分不会深入涉及单片机电路结构原理。博主已有C语言基础，因此相关内容不会从零开始赘述</p>
<p>主要参考学习资料：B站【普中官方】51单片机手把手教学视频</p>
<p>前置知识：C语言</p>
<p>单片机套装：普中STC51单片机开发板A4标准版套餐7</p>
</blockquote>
<h2 id="单片机介绍">单片机介绍
</h2><p><strong>单片机</strong>（Micro Controller Unit），简称MCU</p>
<p>内部集成了CPU、RAM、ROM、定时器、中断系统、通讯接口等一系列电脑常用硬件功能</p>
<p>单片机的任务是信息采集（依靠传感器）、处理（依靠CPU）和硬件设备（例如电机、LED等）的控制</p>
<p>跟计算机相比，单片机是一个袖珍版计算机，一个芯片就能构成完整的计算机系统，但在性能上与计算机相差甚远，但单片机成本低、体积小、结构简单，在生活和工业控制领域大有所用的同时，学习使用单片机也是了解计算机原理与结构的最佳选择</p>
<p><strong>51单片机</strong>是对所有兼容Intel 8051指令系统的单片机的统称</p>
<p><strong>STC89C52系列内部结构框图</strong></p>
<img src="6.png" style="zoom: 67%;" />
<p><strong>STC89C52系列PDIP封装管脚图</strong></p>
<img src="7.png" style="zoom:50%;" />
<h3 id="51单片机最小系统">51单片机最小系统
</h3><p>能使51单片机工作的最简单最基础的电路统称为51单片机最小系统，由晶振电路、复位电路、电源电路构成，而要为单片机烧录程序还需要下载电路</p>
<h4 id="晶振电路">晶振电路
</h4><p>晶振电路为单片机正常工作提供一个时钟</p>
<img src="1.png" style="zoom:33%;" />
<p>51单片机的时钟频率在0~40MHz运行，通常选用12MHz（便于计算时间）或11.059MHz（串行通信波特率为零）的晶振接在管脚18、19</p>
<p>旁路电容作用：消除晶振接入电路一瞬间产生的电感干扰，一端接地，电容大小取决于晶振大小</p>
<h4 id="复位电路">复位电路
</h4><p>复位电路提供系统复位的操作，当系统工作不正常或死机时可以重启系统</p>
<img src="2.png" style="zoom: 33%;" />
<img src="3.png" style="zoom:80%;" />
<p>复位的两种方式：手动按键复位（上图）和接通电源自动复位（下图）</p>
<p>STC89C51单片机为高电平复位，只要让引脚保持一段时间的高电平即可复位</p>
<h4 id="电源电路">电源电路
</h4><p>单片机电压过大会烧毁电路，电压过小系统会运行不起来，因此需要挑选合适的电源电路</p>
<h4 id="下载电路">下载电路
</h4><p><img src="/p/51%E5%8D%95%E7%89%87%E6%9C%BA%E7%A8%8B%E5%BA%8F%E5%AE%9E%E9%AA%8Cep1.%E7%82%B9%E4%BA%AEled/5.png"
	width="842"
	height="354"
	srcset="/p/51%E5%8D%95%E7%89%87%E6%9C%BA%E7%A8%8B%E5%BA%8F%E5%AE%9E%E9%AA%8Cep1.%E7%82%B9%E4%BA%AEled/5_hu8304260819743258219.png 480w, /p/51%E5%8D%95%E7%89%87%E6%9C%BA%E7%A8%8B%E5%BA%8F%E5%AE%9E%E9%AA%8Cep1.%E7%82%B9%E4%BA%AEled/5_hu8281418134176239089.png 1024w"
	loading="lazy"
	
	
		class="gallery-image" 
		data-flex-grow="237"
		data-flex-basis="570px"
	
></p>
<p>下载电路将编译文件下载到单片机</p>
<h2 id="c语言c51扩充内容">C语言C51扩充内容
</h2><h3 id="c51扩充数据类型">C51扩充数据类型
</h3><div class="table-wrapper"><table>
  <thead>
      <tr>
          <th>类型</th>
          <th>长度</th>
          <th>值域</th>
          <th>说明</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>bit</td>
          <td>位</td>
          <td>0或1</td>
          <td>位变量声明</td>
      </tr>
      <tr>
          <td>sbit</td>
          <td>位</td>
          <td>0或1</td>
          <td>特殊功能位声明</td>
      </tr>
      <tr>
          <td>sfr</td>
          <td>8位=1字节</td>
          <td>0~255</td>
          <td>特殊功能寄存器声明</td>
      </tr>
      <tr>
          <td>sfr16</td>
          <td>16位=2字节</td>
          <td>0~65535</td>
          <td>sfr的16位数据声明</td>
      </tr>
      <tr>
          <td>*</td>
          <td>1~3字节</td>
          <td></td>
          <td>对象的地址</td>
      </tr>
  </tbody>
</table></div>
<p>例：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c" data-lang="c"><span class="line"><span class="cl"><span class="n">sfr</span> <span class="n">SCON</span> <span class="o">=</span> <span class="mh">0x98</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="c1">//使用SCON控制单片机上地址为0x98的寄存器
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="n">sbit</span> <span class="n">TI</span> <span class="o">=</span> <span class="n">SCON</span><span class="o">^</span><span class="mi">1</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="c1">//使用TI控制八位寄存器SCON位0~7中的位1
</span></span></span></code></pre></td></tr></table>
</div>
</div><h3 id="reg52头文件">reg52头文件
</h3><p>reg52头文件定义了51单片机特殊功能寄存器和特殊功能位的名字以便我们访问</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c" data-lang="c"><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;reg52.h&gt;//直接在安装目录下寻找头文件</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&#34;reg52.h&#34;//先在工程目录下寻找头文件，再到安装目录</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp"></span><span class="c1">//右键头文件可打开头文件内容
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>头文件内容（了解如何定义即可）</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">  1
</span><span class="lnt">  2
</span><span class="lnt">  3
</span><span class="lnt">  4
</span><span class="lnt">  5
</span><span class="lnt">  6
</span><span class="lnt">  7
</span><span class="lnt">  8
</span><span class="lnt">  9
</span><span class="lnt"> 10
</span><span class="lnt"> 11
</span><span class="lnt"> 12
</span><span class="lnt"> 13
</span><span class="lnt"> 14
</span><span class="lnt"> 15
</span><span class="lnt"> 16
</span><span class="lnt"> 17
</span><span class="lnt"> 18
</span><span class="lnt"> 19
</span><span class="lnt"> 20
</span><span class="lnt"> 21
</span><span class="lnt"> 22
</span><span class="lnt"> 23
</span><span class="lnt"> 24
</span><span class="lnt"> 25
</span><span class="lnt"> 26
</span><span class="lnt"> 27
</span><span class="lnt"> 28
</span><span class="lnt"> 29
</span><span class="lnt"> 30
</span><span class="lnt"> 31
</span><span class="lnt"> 32
</span><span class="lnt"> 33
</span><span class="lnt"> 34
</span><span class="lnt"> 35
</span><span class="lnt"> 36
</span><span class="lnt"> 37
</span><span class="lnt"> 38
</span><span class="lnt"> 39
</span><span class="lnt"> 40
</span><span class="lnt"> 41
</span><span class="lnt"> 42
</span><span class="lnt"> 43
</span><span class="lnt"> 44
</span><span class="lnt"> 45
</span><span class="lnt"> 46
</span><span class="lnt"> 47
</span><span class="lnt"> 48
</span><span class="lnt"> 49
</span><span class="lnt"> 50
</span><span class="lnt"> 51
</span><span class="lnt"> 52
</span><span class="lnt"> 53
</span><span class="lnt"> 54
</span><span class="lnt"> 55
</span><span class="lnt"> 56
</span><span class="lnt"> 57
</span><span class="lnt"> 58
</span><span class="lnt"> 59
</span><span class="lnt"> 60
</span><span class="lnt"> 61
</span><span class="lnt"> 62
</span><span class="lnt"> 63
</span><span class="lnt"> 64
</span><span class="lnt"> 65
</span><span class="lnt"> 66
</span><span class="lnt"> 67
</span><span class="lnt"> 68
</span><span class="lnt"> 69
</span><span class="lnt"> 70
</span><span class="lnt"> 71
</span><span class="lnt"> 72
</span><span class="lnt"> 73
</span><span class="lnt"> 74
</span><span class="lnt"> 75
</span><span class="lnt"> 76
</span><span class="lnt"> 77
</span><span class="lnt"> 78
</span><span class="lnt"> 79
</span><span class="lnt"> 80
</span><span class="lnt"> 81
</span><span class="lnt"> 82
</span><span class="lnt"> 83
</span><span class="lnt"> 84
</span><span class="lnt"> 85
</span><span class="lnt"> 86
</span><span class="lnt"> 87
</span><span class="lnt"> 88
</span><span class="lnt"> 89
</span><span class="lnt"> 90
</span><span class="lnt"> 91
</span><span class="lnt"> 92
</span><span class="lnt"> 93
</span><span class="lnt"> 94
</span><span class="lnt"> 95
</span><span class="lnt"> 96
</span><span class="lnt"> 97
</span><span class="lnt"> 98
</span><span class="lnt"> 99
</span><span class="lnt">100
</span><span class="lnt">101
</span><span class="lnt">102
</span><span class="lnt">103
</span><span class="lnt">104
</span><span class="lnt">105
</span><span class="lnt">106
</span><span class="lnt">107
</span><span class="lnt">108
</span><span class="lnt">109
</span><span class="lnt">110
</span><span class="lnt">111
</span><span class="lnt">112
</span><span class="lnt">113
</span><span class="lnt">114
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c" data-lang="c"><span class="line"><span class="cl"><span class="cm">/*--------------------------------------------------------------------------
</span></span></span><span class="line"><span class="cl"><span class="cm">REG52.H
</span></span></span><span class="line"><span class="cl"><span class="cm">
</span></span></span><span class="line"><span class="cl"><span class="cm">Header file for generic 80C52 and 80C32 microcontroller.
</span></span></span><span class="line"><span class="cl"><span class="cm">Copyright (c) 1988-2002 Keil Elektronik GmbH and Keil Software, Inc.
</span></span></span><span class="line"><span class="cl"><span class="cm">All rights reserved.
</span></span></span><span class="line"><span class="cl"><span class="cm">--------------------------------------------------------------------------*/</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="cp">#ifndef __REG52_H__
</span></span></span><span class="line"><span class="cl"><span class="cp">#define __REG52_H__
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="cm">/*  BYTE Registers  */</span>
</span></span><span class="line"><span class="cl"><span class="n">sfr</span> <span class="n">P0</span>    <span class="o">=</span> <span class="mh">0x80</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="n">sfr</span> <span class="n">P1</span>    <span class="o">=</span> <span class="mh">0x90</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="n">sfr</span> <span class="n">P2</span>    <span class="o">=</span> <span class="mh">0xA0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="n">sfr</span> <span class="n">P3</span>    <span class="o">=</span> <span class="mh">0xB0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="n">sfr</span> <span class="n">PSW</span>   <span class="o">=</span> <span class="mh">0xD0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="n">sfr</span> <span class="n">ACC</span>   <span class="o">=</span> <span class="mh">0xE0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="n">sfr</span> <span class="n">B</span>     <span class="o">=</span> <span class="mh">0xF0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="n">sfr</span> <span class="n">SP</span>    <span class="o">=</span> <span class="mh">0x81</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="n">sfr</span> <span class="n">DPL</span>   <span class="o">=</span> <span class="mh">0x82</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="n">sfr</span> <span class="n">DPH</span>   <span class="o">=</span> <span class="mh">0x83</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="n">sfr</span> <span class="n">PCON</span>  <span class="o">=</span> <span class="mh">0x87</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="n">sfr</span> <span class="n">TCON</span>  <span class="o">=</span> <span class="mh">0x88</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="n">sfr</span> <span class="n">TMOD</span>  <span class="o">=</span> <span class="mh">0x89</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="n">sfr</span> <span class="n">TL0</span>   <span class="o">=</span> <span class="mh">0x8A</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="n">sfr</span> <span class="n">TL1</span>   <span class="o">=</span> <span class="mh">0x8B</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="n">sfr</span> <span class="n">TH0</span>   <span class="o">=</span> <span class="mh">0x8C</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="n">sfr</span> <span class="n">TH1</span>   <span class="o">=</span> <span class="mh">0x8D</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="n">sfr</span> <span class="n">IE</span>    <span class="o">=</span> <span class="mh">0xA8</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="n">sfr</span> <span class="n">IP</span>    <span class="o">=</span> <span class="mh">0xB8</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="n">sfr</span> <span class="n">SCON</span>  <span class="o">=</span> <span class="mh">0x98</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="n">sfr</span> <span class="n">SBUF</span>  <span class="o">=</span> <span class="mh">0x99</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="cm">/*  8052 Extensions  */</span>
</span></span><span class="line"><span class="cl"><span class="n">sfr</span> <span class="n">T2CON</span>  <span class="o">=</span> <span class="mh">0xC8</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="n">sfr</span> <span class="n">RCAP2L</span> <span class="o">=</span> <span class="mh">0xCA</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="n">sfr</span> <span class="n">RCAP2H</span> <span class="o">=</span> <span class="mh">0xCB</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="n">sfr</span> <span class="n">TL2</span>    <span class="o">=</span> <span class="mh">0xCC</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="n">sfr</span> <span class="n">TH2</span>    <span class="o">=</span> <span class="mh">0xCD</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="cm">/*  BIT Registers  */</span>
</span></span><span class="line"><span class="cl"><span class="cm">/*  PSW  */</span>
</span></span><span class="line"><span class="cl"><span class="n">sbit</span> <span class="n">CY</span>    <span class="o">=</span> <span class="n">PSW</span><span class="o">^</span><span class="mi">7</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="n">sbit</span> <span class="n">AC</span>    <span class="o">=</span> <span class="n">PSW</span><span class="o">^</span><span class="mi">6</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="n">sbit</span> <span class="n">F0</span>    <span class="o">=</span> <span class="n">PSW</span><span class="o">^</span><span class="mi">5</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="n">sbit</span> <span class="n">RS1</span>   <span class="o">=</span> <span class="n">PSW</span><span class="o">^</span><span class="mi">4</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="n">sbit</span> <span class="n">RS0</span>   <span class="o">=</span> <span class="n">PSW</span><span class="o">^</span><span class="mi">3</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="n">sbit</span> <span class="n">OV</span>    <span class="o">=</span> <span class="n">PSW</span><span class="o">^</span><span class="mi">2</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="n">sbit</span> <span class="n">P</span>     <span class="o">=</span> <span class="n">PSW</span><span class="o">^</span><span class="mi">0</span><span class="p">;</span> <span class="c1">//8052 only
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="cm">/*  TCON  */</span>
</span></span><span class="line"><span class="cl"><span class="n">sbit</span> <span class="n">TF1</span>   <span class="o">=</span> <span class="n">TCON</span><span class="o">^</span><span class="mi">7</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="n">sbit</span> <span class="n">TR1</span>   <span class="o">=</span> <span class="n">TCON</span><span class="o">^</span><span class="mi">6</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="n">sbit</span> <span class="n">TF0</span>   <span class="o">=</span> <span class="n">TCON</span><span class="o">^</span><span class="mi">5</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="n">sbit</span> <span class="n">TR0</span>   <span class="o">=</span> <span class="n">TCON</span><span class="o">^</span><span class="mi">4</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="n">sbit</span> <span class="n">IE1</span>   <span class="o">=</span> <span class="n">TCON</span><span class="o">^</span><span class="mi">3</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="n">sbit</span> <span class="n">IT1</span>   <span class="o">=</span> <span class="n">TCON</span><span class="o">^</span><span class="mi">2</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="n">sbit</span> <span class="n">IE0</span>   <span class="o">=</span> <span class="n">TCON</span><span class="o">^</span><span class="mi">1</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="n">sbit</span> <span class="n">IT0</span>   <span class="o">=</span> <span class="n">TCON</span><span class="o">^</span><span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="cm">/*  IE  */</span>
</span></span><span class="line"><span class="cl"><span class="n">sbit</span> <span class="n">EA</span>    <span class="o">=</span> <span class="n">IE</span><span class="o">^</span><span class="mi">7</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="n">sbit</span> <span class="n">ET2</span>   <span class="o">=</span> <span class="n">IE</span><span class="o">^</span><span class="mi">5</span><span class="p">;</span> <span class="c1">//8052 only
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="n">sbit</span> <span class="n">ES</span>    <span class="o">=</span> <span class="n">IE</span><span class="o">^</span><span class="mi">4</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="n">sbit</span> <span class="n">ET1</span>   <span class="o">=</span> <span class="n">IE</span><span class="o">^</span><span class="mi">3</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="n">sbit</span> <span class="n">EX1</span>   <span class="o">=</span> <span class="n">IE</span><span class="o">^</span><span class="mi">2</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="n">sbit</span> <span class="n">ET0</span>   <span class="o">=</span> <span class="n">IE</span><span class="o">^</span><span class="mi">1</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="n">sbit</span> <span class="n">EX0</span>   <span class="o">=</span> <span class="n">IE</span><span class="o">^</span><span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="cm">/*  IP  */</span>
</span></span><span class="line"><span class="cl"><span class="n">sbit</span> <span class="n">PT2</span>   <span class="o">=</span> <span class="n">IP</span><span class="o">^</span><span class="mi">5</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="n">sbit</span> <span class="n">PS</span>    <span class="o">=</span> <span class="n">IP</span><span class="o">^</span><span class="mi">4</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="n">sbit</span> <span class="n">PT1</span>   <span class="o">=</span> <span class="n">IP</span><span class="o">^</span><span class="mi">3</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="n">sbit</span> <span class="n">PX1</span>   <span class="o">=</span> <span class="n">IP</span><span class="o">^</span><span class="mi">2</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="n">sbit</span> <span class="n">PT0</span>   <span class="o">=</span> <span class="n">IP</span><span class="o">^</span><span class="mi">1</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="n">sbit</span> <span class="n">PX0</span>   <span class="o">=</span> <span class="n">IP</span><span class="o">^</span><span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="cm">/*  P3  */</span>
</span></span><span class="line"><span class="cl"><span class="n">sbit</span> <span class="n">RD</span>    <span class="o">=</span> <span class="n">P3</span><span class="o">^</span><span class="mi">7</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="n">sbit</span> <span class="n">WR</span>    <span class="o">=</span> <span class="n">P3</span><span class="o">^</span><span class="mi">6</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="n">sbit</span> <span class="n">T1</span>    <span class="o">=</span> <span class="n">P3</span><span class="o">^</span><span class="mi">5</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="n">sbit</span> <span class="n">T0</span>    <span class="o">=</span> <span class="n">P3</span><span class="o">^</span><span class="mi">4</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="n">sbit</span> <span class="n">INT1</span>  <span class="o">=</span> <span class="n">P3</span><span class="o">^</span><span class="mi">3</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="n">sbit</span> <span class="n">INT0</span>  <span class="o">=</span> <span class="n">P3</span><span class="o">^</span><span class="mi">2</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="n">sbit</span> <span class="n">TXD</span>   <span class="o">=</span> <span class="n">P3</span><span class="o">^</span><span class="mi">1</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="n">sbit</span> <span class="n">RXD</span>   <span class="o">=</span> <span class="n">P3</span><span class="o">^</span><span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="cm">/*  SCON  */</span>
</span></span><span class="line"><span class="cl"><span class="n">sbit</span> <span class="n">SM0</span>   <span class="o">=</span> <span class="n">SCON</span><span class="o">^</span><span class="mi">7</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="n">sbit</span> <span class="n">SM1</span>   <span class="o">=</span> <span class="n">SCON</span><span class="o">^</span><span class="mi">6</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="n">sbit</span> <span class="n">SM2</span>   <span class="o">=</span> <span class="n">SCON</span><span class="o">^</span><span class="mi">5</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="n">sbit</span> <span class="n">REN</span>   <span class="o">=</span> <span class="n">SCON</span><span class="o">^</span><span class="mi">4</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="n">sbit</span> <span class="n">TB8</span>   <span class="o">=</span> <span class="n">SCON</span><span class="o">^</span><span class="mi">3</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="n">sbit</span> <span class="n">RB8</span>   <span class="o">=</span> <span class="n">SCON</span><span class="o">^</span><span class="mi">2</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="n">sbit</span> <span class="n">TI</span>    <span class="o">=</span> <span class="n">SCON</span><span class="o">^</span><span class="mi">1</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="n">sbit</span> <span class="n">RI</span>    <span class="o">=</span> <span class="n">SCON</span><span class="o">^</span><span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="cm">/*  P1  */</span>
</span></span><span class="line"><span class="cl"><span class="n">sbit</span> <span class="n">T2EX</span>  <span class="o">=</span> <span class="n">P1</span><span class="o">^</span><span class="mi">1</span><span class="p">;</span> <span class="c1">// 8052 only
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="n">sbit</span> <span class="n">T2</span>    <span class="o">=</span> <span class="n">P1</span><span class="o">^</span><span class="mi">0</span><span class="p">;</span> <span class="c1">// 8052 only
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>             
</span></span><span class="line"><span class="cl"><span class="cm">/*  T2CON  */</span>
</span></span><span class="line"><span class="cl"><span class="n">sbit</span> <span class="n">TF2</span>    <span class="o">=</span> <span class="n">T2CON</span><span class="o">^</span><span class="mi">7</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="n">sbit</span> <span class="n">EXF2</span>   <span class="o">=</span> <span class="n">T2CON</span><span class="o">^</span><span class="mi">6</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="n">sbit</span> <span class="n">RCLK</span>   <span class="o">=</span> <span class="n">T2CON</span><span class="o">^</span><span class="mi">5</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="n">sbit</span> <span class="n">TCLK</span>   <span class="o">=</span> <span class="n">T2CON</span><span class="o">^</span><span class="mi">4</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="n">sbit</span> <span class="n">EXEN2</span>  <span class="o">=</span> <span class="n">T2CON</span><span class="o">^</span><span class="mi">3</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="n">sbit</span> <span class="n">TR2</span>    <span class="o">=</span> <span class="n">T2CON</span><span class="o">^</span><span class="mi">2</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="n">sbit</span> <span class="n">C_T2</span>   <span class="o">=</span> <span class="n">T2CON</span><span class="o">^</span><span class="mi">1</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="n">sbit</span> <span class="n">CP_RL2</span> <span class="o">=</span> <span class="n">T2CON</span><span class="o">^</span><span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="cp">#endif
</span></span></span></code></pre></td></tr></table>
</div>
</div><h2 id="点亮第一个led">点亮第一个LED
</h2><h3 id="c51单片机gpio介绍及led线路">C51单片机GPIO介绍及LED线路
</h3><p>**GPIO（General Purpose Input Output）**是通用输入输出端口的简称，可以通过软件来控制其输入和输出</p>
<p><strong>51单片机引脚分类：</strong></p>
<ul>
<li>电源引脚（Vcc/Vdd/Gnd/Vss）</li>
<li>晶振引脚（XTAL）</li>
<li>复位引脚（RST/Reset）</li>
<li>下载引脚（P3.0/P3.1）</li>
<li>GPIO引脚（P0~P3）</li>
</ul>
<p>详细管脚功能可在单片机手册中查询</p>
<p><strong>LED线路图</strong></p>
<img src="8.png" style="zoom: 50%;" />
<h3 id="程序1点亮d1指示灯">程序1：点亮D1指示灯
</h3><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c" data-lang="c"><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&#34;reg52.h&#34;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="n">sbit</span> <span class="n">LED1</span> <span class="o">=</span> <span class="n">P2</span><span class="o">^</span><span class="mi">0</span><span class="p">;</span><span class="c1">//将控制D1灯的P2管脚第0位命名为LED1
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kt">void</span> <span class="nf">main</span><span class="p">()</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="n">LED1</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span><span class="c1">//设置LED1为低电平，LED低电平0点亮，高电平1熄灭
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong>效果图</strong></p>
<img src="1.jpg" style="zoom:50%;" />
<h3 id="程序2控制d1指示灯闪烁">程序2：控制D1指示灯闪烁
</h3><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c" data-lang="c"><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&#34;reg52.h&#34;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="k">typedef</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">u16</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">sbit</span> <span class="n">LED1</span> <span class="o">=</span> <span class="n">P2</span><span class="o">^</span><span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kt">void</span> <span class="nf">delay_10us</span><span class="p">(</span><span class="n">u16</span> <span class="n">time</span><span class="p">)</span><span class="c1">//定义延时函数
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="k">while</span><span class="p">(</span><span class="n">time</span> <span class="o">--</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="c1">//单次while循环时间约为10微秒，后续讲到定时器可以准确计时
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kt">void</span> <span class="nf">main</span><span class="p">()</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="k">while</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="n">LED1</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span><span class="c1">//点亮D1灯
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>		<span class="nf">delay_10us</span><span class="p">(</span><span class="mi">50000</span><span class="p">);</span><span class="c1">//延时约488毫秒
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>		<span class="n">LED1</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span><span class="c1">//熄灭D1灯
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>		<span class="nf">delay_10us</span><span class="p">(</span><span class="mi">50000</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="程序3led流水灯">程序3：LED流水灯
</h3><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c" data-lang="c"><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&#34;reg52.h&#34;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp">#define LED_PORT P2</span><span class="c1">//使用宏定义将P2端口定义
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="k">typedef</span> <span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">u8</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="k">typedef</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">u16</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kt">void</span> <span class="nf">delay_10us</span><span class="p">(</span><span class="n">u16</span> <span class="n">time</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="k">while</span><span class="p">(</span><span class="n">time</span> <span class="o">--</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kt">void</span> <span class="nf">main</span><span class="p">()</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="n">u8</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span><span class="c1">//循环控制变量
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="k">while</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="k">for</span><span class="p">(</span><span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span><span class="n">i</span> <span class="o">&lt;</span> <span class="mi">8</span><span class="p">;</span><span class="n">i</span><span class="o">++</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">		<span class="p">{</span>
</span></span><span class="line"><span class="cl">			<span class="n">LED_PORT</span> <span class="o">=</span> <span class="o">~</span><span class="p">(</span><span class="mh">0x01</span> <span class="o">&lt;&lt;</span> <span class="n">i</span><span class="p">);</span><span class="c1">//见下文解读
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>			<span class="nf">delay_10us</span><span class="p">(</span><span class="mi">50000</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">		<span class="p">}</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>LED_PORT用八位二进制数上的每一位分别控制八个LED灯的电平，要实现流水灯，其值应当这样变化：11111110→11111101→11111011→……</p>
<p>不难想到可以通过左移运算符让二进制数的数位整体左移，但是二进制数左移后最右侧会补零而不是补一，因此采用对00000001左移再按位取反的方法</p>
<p>代码中0x01采用十六进制是为了简洁</p>
<p><strong>额外介绍一个使用intrins头文件中左移右移的方法</strong></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c" data-lang="c"><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&#34;reg52.h&#34;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&#34;intrins.h&#34;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp">#define LED_PORT P2
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="k">typedef</span> <span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">u8</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="k">typedef</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">u16</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kt">void</span> <span class="nf">delay_10us</span><span class="p">(</span><span class="n">u16</span> <span class="n">time</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="k">while</span><span class="p">(</span><span class="n">time</span> <span class="o">--</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kt">void</span> <span class="nf">main</span><span class="p">()</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="n">u8</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">	<span class="n">LED_PORT</span> <span class="o">=~</span> <span class="mh">0x01</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">	<span class="k">while</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="k">for</span><span class="p">(</span><span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span><span class="n">i</span> <span class="o">&lt;</span> <span class="mi">7</span><span class="p">;</span><span class="n">i</span><span class="o">++</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">		<span class="p">{</span>
</span></span><span class="line"><span class="cl">			<span class="n">LED_PORT</span> <span class="o">=</span> <span class="nf">_crol_</span><span class="p">(</span><span class="n">LED_PORT</span><span class="p">,</span><span class="mi">1</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">            <span class="c1">//对LED_PORT左移1位，并将左侧移出去的数位补到右侧，即11111110→11111101
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>			<span class="nf">delay_10us</span><span class="p">(</span><span class="mi">50000</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">		<span class="p">}</span>
</span></span><span class="line"><span class="cl">		<span class="k">for</span><span class="p">(</span><span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span><span class="n">i</span> <span class="o">&lt;</span> <span class="mi">7</span><span class="p">;</span><span class="n">i</span><span class="o">++</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">		<span class="p">{</span>
</span></span><span class="line"><span class="cl">			<span class="n">LED_PORT</span> <span class="o">=</span> <span class="nf">_cror_</span><span class="p">(</span><span class="n">LED_PORT</span><span class="p">,</span><span class="mi">1</span><span class="p">);</span><span class="c1">//右移同理
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>			<span class="nf">delay_10us</span><span class="p">(</span><span class="mi">50000</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">		<span class="p">}</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>该程序进一步实现流水灯从左到右再从右到左来回闪烁的效果</p>
<hr>
<p><strong>本章完</strong></p>

</section>


    <footer class="article-footer">
    

    </footer>


    
        <link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css"integrity="sha384-n8MVd4RsNIU0tAv4ct0nTaAbDJwPJzDEaqSD1odI&#43;WdtXRGWt2kTvGFasHpSy3SV"crossorigin="anonymous"
            ><script 
                src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.js"integrity="sha384-XjKyOOlGwcjNTAIQHIpgOno0Hl1YQqzUOEleOLALmuqehneUG&#43;vnGctmUb0ZY0l8"crossorigin="anonymous"
                defer
                >
            </script><script 
                src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/contrib/auto-render.min.js"integrity="sha384-&#43;VBxd3r6XgURycqtZ117nYw44OOcIax56Z4dCRWbxyPt0Koah1uHoK0o4&#43;/RRE05"crossorigin="anonymous"
                defer
                >
            </script><script>
    window.addEventListener("DOMContentLoaded", () => {
        renderMathInElement(document.body, {
            delimiters: [
                { left: "$$", right: "$$", display: true },
                { left: "$", right: "$", display: false },
                { left: "\\(", right: "\\)", display: false },
                { left: "\\[", right: "\\]", display: true }
            ],
            ignoredClasses: ["gist"]
        });})
</script>
    
</article>

    

    

<aside class="related-content--wrapper">
    <h2 class="section-title">相关文章</h2>
    <div class="related-content">
        <div class="flex article-list--tile">
            
                
<article class="">
    <a href="/p/%E6%9C%BA%E5%99%A8%E4%BA%BA%E5%AD%A6%E5%AF%BC%E8%AE%BAep3.%E6%93%8D%E4%BD%9C%E8%87%82%E6%AD%A3%E5%90%91%E8%BF%90%E5%8A%A8%E5%AD%A6/">
        
        

        <div class="article-details">
            <h2 class="article-title">【机器人学导论】Ep3.操作臂（正向）运动学</h2>
        </div>
    </a>
</article>

            
                
<article class="">
    <a href="/p/%E6%9C%BA%E5%99%A8%E4%BA%BA%E5%AD%A6%E5%AF%BC%E8%AE%BAep2.2.%E7%A9%BA%E9%97%B4%E6%8F%8F%E8%BF%B0%E5%92%8C%E5%8F%98%E6%8D%A2-2/">
        
        

        <div class="article-details">
            <h2 class="article-title">【机器人学导论】Ep2.2.空间描述和变换-2</h2>
        </div>
    </a>
</article>

            
                
<article class="">
    <a href="/p/%E6%9C%BA%E5%99%A8%E4%BA%BA%E5%AD%A6%E5%AF%BC%E8%AE%BAep2.1.%E7%A9%BA%E9%97%B4%E6%8F%8F%E8%BF%B0%E5%92%8C%E5%8F%98%E6%8D%A2-1/">
        
        

        <div class="article-details">
            <h2 class="article-title">【机器人学导论】Ep2.1.空间描述和变换-1</h2>
        </div>
    </a>
</article>

            
                
<article class="">
    <a href="/p/%E6%9C%BA%E5%99%A8%E4%BA%BA%E5%AD%A6%E5%AF%BC%E8%AE%BAep1.%E6%A6%82%E8%BF%B0/">
        
        

        <div class="article-details">
            <h2 class="article-title">【机器人学导论】Ep1.概述</h2>
        </div>
    </a>
</article>

            
                
<article class="">
    <a href="/p/%E5%A4%8D%E5%8F%98%E5%87%BD%E6%95%B0%E8%AE%BAep2.%E8%A7%A3%E6%9E%90%E5%87%BD%E6%95%B0/">
        
        

        <div class="article-details">
            <h2 class="article-title">【复变函数论】Ep2.解析函数</h2>
        </div>
    </a>
</article>

            
        </div>
    </div>
</aside>

     
    
        
    <div class="disqus-container">
    <div id="disqus_thread"></div>
<script>
    window.disqus_config = function () {
    
    
    
    };
    (function() {
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
            document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
            return;
        }
        var d = document, s = d.createElement('script'); s.async = true;
        s.src = '//' + "hugo-theme-stack" + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
</div>

<style>
    .disqus-container {
        background-color: var(--card-background);
        border-radius: var(--card-border-radius);
        box-shadow: var(--shadow-l1);
        padding: var(--card-padding);
    }
</style>

<script>
    window.addEventListener('onColorSchemeChange', (e) => {
        if (typeof DISQUS == 'object') {
            DISQUS.reset({
                reload: true
            });
        }
    })
</script>

    

    <footer class="site-footer">
    <section class="copyright">
        &copy; 
        
        2024 一杯为品
    </section>
    
    <section class="powerby">
        使用 <a href="https://gohugo.io/" target="_blank" rel="noopener">Hugo</a> 构建 <br />
        主题 <b><a href="https://github.com/CaiJimmy/hugo-theme-stack" target="_blank" rel="noopener" data-version="3.29.0">Stack</a></b> 由 <a href="https://jimmycai.com" target="_blank" rel="noopener">Jimmy</a> 设计
    </section>
</footer>


    
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    
    <div class="pswp__bg"></div>

    
    <div class="pswp__scroll-wrap">

        
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                
                
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                        <div class="pswp__preloader__cut">
                            <div class="pswp__preloader__donut"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div>
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div><script 
                src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js"integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo="crossorigin="anonymous"
                defer
                >
            </script><script 
                src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js"integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU="crossorigin="anonymous"
                defer
                >
            </script><link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css"crossorigin="anonymous"
            ><link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css"crossorigin="anonymous"
            >

            </main>
        </div>
        <script 
                src="https://cdn.jsdelivr.net/npm/node-vibrant@3.1.6/dist/vibrant.min.js"integrity="sha256-awcR2jno4kI5X0zL8ex0vi2z&#43;KMkF24hUW8WePSA9HM="crossorigin="anonymous"
                
                >
            </script><script type="text/javascript" src="/ts/main.1e9a3bafd846ced4c345d084b355fb8c7bae75701c338f8a1f8a82c780137826.js" defer></script>
<script>
    (function () {
        const customFont = document.createElement('link');
        customFont.href = "https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap";

        customFont.type = "text/css";
        customFont.rel = "stylesheet";

        document.head.appendChild(customFont);
    }());
</script>
<script src=https://INKEM.github.io/background/sakura.js></script>
<style>
  body {
    background: url(https://INKEM.github.io/background/Sakura.png) no-repeat center top;
    background-size: cover;
    background-attachment: fixed;
  }
</style>
<style>
  @font-face {
    font-family: '初夏明朝';
    src: url(https://INKEM.github.io/font/EarlySummerSerif-Bold.ttf) format('truetype');
  }

  :root {
    --base-font-family: '初夏明朝';
    --code-font-family: '初夏明朝';
  }
</style>

    </body>
</html>
